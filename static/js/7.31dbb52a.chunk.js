(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{226:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"e",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return c}),a.d(t,"a",function(){return r});var s="https://shenzekun-qmusic-api.now.sh/",n="https://shenzekun-qmusic-api.now.sh/top",o="https://shenzekun-qmusic-api.now.sh/search",c="https://shenzekun-qmusic-api.now.sh/lyrics",r="https://shenzekun-qmusic-api.now.sh/hotkey"},232:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"c",function(){return r});var s=a(226);function n(e){return"https://api.bzqll.com/music/tencent/url?key=579621905&id=".concat(e)}function o(e){return"".concat(s.b,"?id=").concat(e)}function c(e){return"https://y.gtimg.cn/music/photo_new/T002R150x150M000".concat(e,".jpg")}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"".concat(s.d,"?keyword=").concat(e,"&page=").concat(t)}},234:function(e,t,a){"use strict";var s=a(246),n=a.n(s),o=a(248),c=a.n(o);n.a.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded";var r=n.a.create({timeout:3e4,transformRequest:[function(e){return c.a.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}});r.interceptors.request.use(function(e){return e.data||(e.data={}),e.data.token="",e},function(e){return Promise.reject(e)}),r.interceptors.response.use(function(e){return e.data},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="\u9519\u8bef\u8bf7\u6c42";break;case 401:e.message="\u672a\u6388\u6743\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55";break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u9519\u8bef,\u672a\u627e\u5230\u8be5\u8d44\u6e90";break;case 405:e.message="\u8bf7\u6c42\u65b9\u6cd5\u672a\u5141\u8bb8";break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u7aef\u51fa\u9519";break;case 501:e.message="\u7f51\u7edc\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u7edc\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u7edc\u8d85\u65f6";break;case 505:e.message="http\u7248\u672c\u4e0d\u652f\u6301\u8be5\u8bf7\u6c42";break;default:e.message="\u8fde\u63a5\u9519\u8bef".concat(e.response.status)}else e.message="\u8fde\u63a5\u5230\u670d\u52a1\u5668\u5931\u8d25";return Promise.resolve(e.response)});var i=r,l=a(226),u=a(232);a.d(t,"d",function(){return h}),a.d(t,"c",function(){return A}),a.d(t,"a",function(){return d}),a.d(t,"e",function(){return g}),a.d(t,"b",function(){return m});var h=function(){return i({url:l.c})},A=function(){return i({url:l.e})},d=function(){return i({url:l.a})},g=function(e,t){return i({url:Object(u.c)(e,t)})},m=function(e){return i({url:Object(u.b)(e)})}},237:function(e,t,a){"use strict";var s=a(1),n=a.n(s),o=a(238),c=a.n(o),r=a(240),i=a.n(r);t.a=function(){return n.a.createElement("div",{className:c.a.loading},n.a.createElement("img",{src:i.a,alt:"loading"}),n.a.createElement("p",null,"\u9875\u9762\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d",n.a.createElement("span",null,"...")))}},238:function(e,t,a){e.exports={loading:"loading_loading__VNwnj"}},240:function(e,t){e.exports="data:image/gif;base64,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"},251:function(e,t,a){"use strict";function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return s})},299:function(e,t,a){e.exports={search_loading:"search_loading_search_loading__3X9Cw",icon_loading:"search_loading_icon_loading__1HUID",loading:"search_loading_loading__HEQH-",loading_text:"search_loading_loading_text__a087d",loading_done:"search_loading_loading_done__12ZEx"}},301:function(e,t,a){e.exports={search_bar:"search_search_bar__2EJBb",input_wrap:"search_input_wrap__1iKk2",search_input:"search_search_input__3SbHJ",icon_search:"search_icon_search__1jbIk",icon_delete:"search_icon_delete__13UXe",search_cancel:"search_search_cancel__2RdOI",record_keys:"search_record_keys__3H1V1",record_item:"search_record_item__3ltyN",record_main:"search_record_main__TlaBZ",icon_clock:"search_icon_clock__utYdP",record_con:"search_record_con__3lcFg",icon_close:"search_icon_close__1vtMG",record_delete:"search_record_delete__3Guc8",search_results:"search_search_results__3OU1X",song_item:"search_song_item__1ujNm",song_name:"search_song_name__2NBQr",song_artist:"search_song_artist__2A97J",icon_music:"search_icon_music__2GGdF",mod_search_result:"search_mod_search_result__v8bj8",result_tit:"search_result_tit__3O7bk",result_tags:"search_result_tags__1L5CS",tag:"search_tag__3bJeM",tag_hot:"search_tag_hot__tRgdL"}},320:function(e,t,a){"use strict";a.r(t);var s=a(103),n=a(26),o=a(251),c=a(227),r=a(228),i=a(231),l=a(229),u=a(230),h=a(1),A=a.n(h),d=a(75),g=a(234),m=(a(237),a(299)),_=a.n(m),w=function(e){var t=e.message,a=void 0===t?"":t,s=e.children,n=void 0===s?null:s;return A.a.createElement("div",{className:_.a.search_loading},n&&!a&&n,a&&!n&&A.a.createElement(h.Fragment,null,A.a.createElement("i",{className:_.a.icon_loading}),A.a.createElement("div",{className:_.a.loading_text},a)))},p=a(301),C=a.n(p),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var s=arguments.length,r=new Array(s),u=0;u<s;u++)r[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={hotkeys:null,defaultHotKeys:null,keyword:"",isShowCancel:!1,isShowDelete:!1,isShowSearchResults:!1,isShowHistory:!1,page:1,searchResult:null,getLastKeyword:"",songsObject:{},history:[],isGetHotKey:!1,isLoading:!1,isLoad:!0},a.handleSearchChange=function(e){var t=e.target.value?e.target.value.trim():e.target.value;a.setState({keyword:t})},a.handleSearchEnter=function(e){var t=a.state.keyword,s=!1;t?s=!0:(s=!1,a.reset()),13===e.keyCode?t?(a.setState({isShowDelete:s,isShowHistory:!1,isShowSearchResults:!0}),a.addHistory(t),a.search(t)):a.setState({isShowDelete:s,isShowHistory:!1}):a.setState({isShowDelete:s})},a.handleClickSearchCancel=function(){a.setState({isShowCancel:!1,isShowDelete:!1,isShowHistory:!1}),a.reset()},a.handleClickSearchDelete=function(){a.setState({isShowDelete:!1,keyword:""}),a.reset()},a.handleRecordDelete=function(e){var t=a.state.history,s=a.props.setHistoryKey,n=t.indexOf(e);t.splice(n,1),a.setState({isShowHistory:t.length>0,history:Object(o.a)(t)}),s&&s(t.join())},a.handleRecordDeleteAll=function(){var e=a.props.setHistoryKey;a.setState({isShowHistory:!1,history:[]}),e&&e("")},a.handleSearchClick=function(){a.state.history.length>0?a.setState({isShowCancel:!0,isShowHistory:!0}):a.setState({isShowCancel:!0,isShowHistory:!1})},a.handleClickHotKey=function(e){a.setState({keyword:e,isShowDelete:!0,isShowCancel:!0,isShowHistory:!1,isShowSearchResults:!0}),a.addHistory(e),a.search(e)},a.onScroll=function(e){if(!a.state.isLoad)return window.removeEventListener("scroll",a.onScroll);document.documentElement.clientHeight+window.pageYOffset>document.body.scrollHeight-100&&a.search(a.state.keyword,a.state.page+1)},a.showPlayerDetail=function(e){var t=a.props,s=t.showPlayer,o=t.getSong;s&&s(),o&&o(Object(n.a)({},e)),a.props.history.push("/player")},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll),this.setState({history:localStorage.getItem("HISTORY_KEY")?localStorage.getItem("HISTORY_KEY").split(","):[]}),this.getHotList()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"getHotList",value:function(){var e=this;Object(g.a)().then(function(t){var a=t.data.hotkey,s=e.shuffle(a,6);e.setState({defaultHotKeys:a,hotkeys:s,isGetHotKey:!0})})}},{key:"addHistory",value:function(e){var t=this.state.history,a=this.props.setHistoryKey;t.includes(e)||(t.unshift(e),this.setState({history:t}),a&&a(t.join()))}},{key:"search",value:function(e,t){var a=this;void 0===e&&(e=""),""!==e&&(this.state.getLastKeyword===e&&this.state.songsObject[t||this.state.page]||!this.state.isLoading&&this.state.isLoad&&(this.state.getLastKeyword!==e&&this.reset(),this.setState({getLastKeyword:e}),this.setState({isLoading:!0}),Object(g.e)(e,t||this.state.page).then(function(e){a.setState({page:e.data.song.curpage,songsObject:Object(n.a)({},a.state.songsObject,Object(s.a)({},t||a.state.page,e.data.song.list)),searchResult:a.state.searchResult?a.state.searchResult.concat(e.data.song.list):e.data.song.list,isLoading:!1,isLoad:"no results"!==e.message})}).catch(function(e){console.error(e)})))}},{key:"reset",value:function(){this.setState({page:1,isLoad:!0,songsObject:{},searchResult:null})}},{key:"shuffle",value:function(e,t){for(var a=[],s=Math.min(t,e.length),n=0;n<s;n++){var o=e,c=Math.floor(Math.random()*o.length);a[n]=o[c],e.splice(c,1)}return a}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,s=t.isLoad,n=t.keyword,o=t.isShowCancel,c=t.isShowDelete,r=t.isShowSearchResults,i=t.searchResult,l=t.isShowHistory,u=t.isGetHotKey,h=t.defaultHotKeys,d=t.hotkeys,g=t.history,m=void 0===g?[]:g;return A.a.createElement("div",{className:C.a.search_wrap},A.a.createElement("div",{className:C.a.content},A.a.createElement("div",{className:C.a.search_bar},A.a.createElement("div",{className:C.a.input_wrap},A.a.createElement("input",{type:"text",className:C.a.search_input,value:n,onChange:this.handleSearchChange,onKeyUp:this.handleSearchEnter,onClick:this.handleSearchClick,placeholder:"\u641c\u7d22\u6b4c\u66f2\u3001\u6b4c\u5355\u3001\u4e13\u8f91"}),A.a.createElement("span",{className:C.a.icon_search}),c&&A.a.createElement("span",{className:C.a.icon_delete,onClick:this.handleClickSearchDelete},"\u5220\u9664")),o&&A.a.createElement("div",{className:C.a.search_cancel,onClick:this.handleClickSearchCancel},"\u53d6\u6d88")),m.length>0&&l&&A.a.createElement("div",{className:C.a.record_keys},m.map(function(t,a){return A.a.createElement("li",{key:t,className:C.a.record_item},A.a.createElement("div",{className:C.a.record_main},A.a.createElement("i",{className:"".concat(C.a.icon_clock)}),A.a.createElement("span",{className:C.a.record_con,onClick:function(){return e.handleClickHotKey(t)}},t),A.a.createElement("i",{className:C.a.icon_close,onClick:function(){return e.handleRecordDelete(t)}})))}),A.a.createElement("p",{className:C.a.record_delete,onClick:this.handleRecordDeleteAll},"\u6e05\u9664\u641c\u7d22\u8bb0\u5f55")),r&&A.a.createElement("div",{className:C.a.search_results},A.a.createElement("div",{className:C.a.song_list},i&&i.map(function(t,a){return A.a.createElement("div",{className:C.a.song_item,key:t.songid+""+a,onClick:function(){return e.showPlayerDetail(t)}},A.a.createElement("i",{className:C.a.icon_music}),A.a.createElement("div",{className:C.a.song_name,dangerouslySetInnerHTML:{__html:t.songname}}),A.a.createElement("div",{className:C.a.song_artiist},t.singer&&t.singer.map(function(e,t){return A.a.createElement("span",{key:t},e.name+" ")})))})),a&&A.a.createElement(w,{message:"\u6b63\u5728\u8f7d\u5165\u66f4\u591a..."}),!s&&A.a.createElement(w,null,A.a.createElement("div",{className:C.a.loading_done,style:{color:"#808080",fontSize:"12px"}},"\u5df2\u52a0\u8f7d\u5168\u90e8"))),!l&&!r&&A.a.createElement("div",{className:C.a.mod_search_result},A.a.createElement("h3",{className:C.a.result_tit},"\u70ed\u95e8\u641c\u7d22"),u&&A.a.createElement("div",{className:C.a.result_tags},h.special_url&&A.a.createElement("a",{href:h.special_url,className:"".concat(C.a.tag," ").concat(C.a.tag_hot)},h.special_key),d&&d.map(function(t){return A.a.createElement("div",{className:"".concat(C.a.tag," ").concat(C.a.tag_keyword),key:t.n,onClick:function(){return e.handleClickHotKey(t.k)}},t.k)})),!u&&A.a.createElement(w,{message:"\u6b63\u5728\u52a0\u8f7d..."}))))}}]),t}(h.PureComponent);t.default=Object(d.connect)(function(e,t){return{isShowPlayer:e.app.isShowPlayer,isPlay:e.app.isPlay,song:e.app.song,artist:e.app.artist}},function(e){return{setHistoryKey:function(t){e({type:"app/setHistoryKey",payload:t})},getSong:function(t){e({type:"app/getSong",payload:t})},showPlayer:function(){e({type:"app/showPlayer"})}}})(y)}}]);
//# sourceMappingURL=7.31dbb52a.chunk.js.map